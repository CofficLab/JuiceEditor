<template>
  <div class="join join-vertical w-24">
    <div class="menu menu-sm bg-base-200 p-1">
      <li><a class="no-underline" @click="onNewTab">æ–°æ ‡ç­¾</a></li>
      <li><a class="no-underline" @click="setNotRunnable">å…³è¿è¡Œ</a></li>
      <li><a class="no-underline" @click="setRunnable">å¼€è¿è¡Œ</a></li>
      <li><a class="copy no-underline" v-bind:data-clipboard-text="content">å¤åˆ¶ä»£ç </a></li>
      <li><a class="no-underline" @click="onDelete">åˆ é™¤</a></li>
      <li><a class="no-underline" @click="onNewLine">æ’å…¥ç©ºè¡Œ</a></li>
    </div>
  </div>
</template>

<script lang="ts" setup>
import ClipboardJS from 'clipboard'
import { SmartLanguage } from './Entities/SmartLanguage'

var clipboard = new ClipboardJS('.copy')
clipboard
  .on('success', function () {
    console.log('ğŸ‹ ğŸ’¼ CodeEditor: å·²å°†æºç å¤åˆ¶åˆ°å‰ªè´´æ¿')
  })
  .on('error', function (error) {
    console.log('å¤åˆ¶å¤±è´¥')
    console.log(error)
  })

const props = defineProps({
  language: {
    type: SmartLanguage,
    required: true,
    default: ''
  },
  content: {
    type: String,
    default: ''
  },
  onNewTab: {
    type: Function,
    default: () => {}
  },
  onSetRunnable: {
    type: Function,
    default: () => {}
  },
  onSetNotRunnable: {
    type: Function,
    default: () => {}
  },
  onDelete: {
    type: Function,
    default: () => {}
  },
  onNewLine: {
    type: Function,
    default: () => {}
  }
})

function onDelete() {
  props.onDelete()
}

function onNewTab() {
  props.onNewTab()
}

function onNewLine() {
  props.onNewLine()
}

function setRunnable() {
  props.onSetRunnable()
}

function setNotRunnable() {
  props.onSetNotRunnable()
}
</script>
